# Environment-Specific Terraform Variables

This directory contains environment-specific configuration files for Terraform deployments.

## Structure

```
environments/
├── dev.tfvars      # Development environment
├── staging.tfvars  # Staging environment
└── prod.tfvars     # Production environment
```

## Usage

### With Terraform CLI

```bash
# Development
terraform plan -var-file="environments/dev.tfvars"
terraform apply -var-file="environments/dev.tfvars"

# Staging
terraform plan -var-file="environments/staging.tfvars"
terraform apply -var-file="environments/staging.tfvars"

# Production
terraform plan -var-file="environments/prod.tfvars"
terraform apply -var-file="environments/prod.tfvars"
```

### With GitHub Actions

The workflows automatically select the appropriate tfvars file based on the environment input:

```yaml
terraform plan -var-file="environments/${{ github.event.inputs.environment }}.tfvars"
```

## Environment Differences

### Development (`dev.tfvars`)
- **VPC CIDR**: 10.0.0.0/16
- **Instance Type**: t3.small
- **DB Instance**: db.t3.micro
- **Multi-AZ**: Disabled (cost optimization)
- **Purpose**: Testing and development

### Staging (`staging.tfvars`)
- **VPC CIDR**: 10.1.0.0/16
- **Instance Type**: t3.medium
- **DB Instance**: db.t3.small
- **Multi-AZ**: Optional
- **Purpose**: Pre-production testing

### Production (`prod.tfvars`)
- **VPC CIDR**: 10.2.0.0/16
- **Instance Type**: t3.large
- **DB Instance**: db.t3.medium
- **Multi-AZ**: Enabled (high availability)
- **Purpose**: Production workloads

## Configuration Guidelines

### Before Deploying

1. **Update GitHub Repository Name**: Replace `YOUR-USERNAME` in `github_repo_name` with your actual GitHub username
2. **Review Instance Sizes**: Adjust instance types based on your needs and budget
3. **Check Region**: Ensure `aws_region` matches your AWS account setup
4. **VPC CIDR Ranges**: Different CIDRs allow deploying multiple environments simultaneously without conflicts

### Security Notes

- ✅ No secrets are stored in these files
- ✅ Database passwords are auto-generated by Terraform
- ✅ Passwords are stored securely in AWS Systems Manager Parameter Store
- ✅ These files can be safely committed to version control

## Adding New Environments

To add a new environment (e.g., `qa`):

1. Create `qa.tfvars` with appropriate settings
2. Use a unique VPC CIDR (e.g., 10.3.0.0/16)
3. Update GitHub Actions workflow to include `qa` in environment choices

```yaml
options:
  - dev
  - staging
  - qa
  - prod
```

## Best Practices

- ✅ Keep environment configurations consistent in structure
- ✅ Use different VPC CIDRs to prevent conflicts
- ✅ Scale instance sizes appropriately for each environment
- ✅ Enable Multi-AZ only for production (cost vs. reliability trade-off)
- ✅ Document any environment-specific customizations
- ✅ Test changes in dev before promoting to staging/prod
